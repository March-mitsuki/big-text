:root {
  /* 只需要改这一项来控制整体大小 */
  --colormode-switch-size: 2em; /* 原来宽度是 4em，这里保持默认一致 */
}

/* The switch */
.switch {
  font-size: 17px;
  position: relative;
  display: inline-block;

  /* 原始宽高比：4em × 2.2em => 0.55 */
  width: var(--colormode-switch-size);
  height: calc(var(--colormode-switch-size) * 0.55);

  /* 用高度的一半做圆角，保持胶囊形状 */
  border-radius: calc(var(--colormode-switch-size) * 0.275);
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background-color: #2a2a2a;
  transition: 0.4s;
  border-radius: inherit;
  overflow: hidden;
}

/* 滑块按钮尺寸与内边距：原 1.2em / 4em = 0.3；0.5em / 4em = 0.125 */
.slider:before {
  position: absolute;
  content: "";
  height: calc(var(--colormode-switch-size) * 0.3);
  width: calc(var(--colormode-switch-size) * 0.3);
  border-radius: 50%;
  left: calc(var(--colormode-switch-size) * 0.125);
  bottom: calc(var(--colormode-switch-size) * 0.125);
  transition: 0.4s;
  transition-timing-function: cubic-bezier(0.81, -0.04, 0.38, 1.5);
  /* 阴影按宽度比例缩放：8px, -4px 基于 4em≈64px -> 8/64=0.125, -4/64=-0.0625 */
  box-shadow: inset calc(var(--colormode-switch-size) * 0.125) calc(var(--colormode-switch-size) * -0.0625) 0 0 #fff;
}

.switch input:checked + .slider {
  background-color: #00a6ff;
}

/* 打开状态位移：原 1.8em / 4em = 0.45；阴影 15px -> 15/64≈0.234375，扩展半径 15px 同比 */
.switch input:checked + .slider:before {
  transform: translateX(calc(var(--colormode-switch-size) * 0.45));
  box-shadow: inset calc(var(--colormode-switch-size) * 0.234375) calc(var(--colormode-switch-size) * -0.0625) 0
    calc(var(--colormode-switch-size) * 0.234375) #ffcf48;
}

/* Stars：星星大小选用宽度的 8%（原 ~5px 在 4em≈64px 时是 ~7.8%） */
.star {
  background-color: #fff;
  border-radius: 50%;
  position: absolute;
  width: calc(var(--colormode-switch-size) * 0.08);
  height: calc(var(--colormode-switch-size) * 0.08);
  transition: all 0.4s;
}

/* 星星位置按宽度比例还原：2.5/4=0.625；0.5/4=0.125 等 */
.star_1 {
  left: calc(var(--colormode-switch-size) * 0.625);
  top: calc(var(--colormode-switch-size) * 0.125);
}

.star_2 {
  left: calc(var(--colormode-switch-size) * 0.55);
  top: calc(var(--colormode-switch-size) * 0.3);
}

.star_3 {
  left: calc(var(--colormode-switch-size) * 0.75);
  top: calc(var(--colormode-switch-size) * 0.225);
}

.switch input:checked ~ .slider .star {
  opacity: 0;
}

/* Cloud：宽度与偏移同样按宽度比例（3.5/4=0.875，-1.4/4=-0.35，-1.1/4=-0.275） */
.cloud {
  width: calc(var(--colormode-switch-size) * 0.875);
  position: absolute;
  bottom: calc(var(--colormode-switch-size) * -0.35);
  left: calc(var(--colormode-switch-size) * -0.275);
  opacity: 0;
  transition: all 0.4s;
}

.switch input:checked ~ .slider .cloud {
  opacity: 1;
}
